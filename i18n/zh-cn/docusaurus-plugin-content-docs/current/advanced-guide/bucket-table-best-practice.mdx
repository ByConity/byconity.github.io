---
title: Bucket table 最佳实践手册
tags:
  - Docs
---

# Bucket table 说明

在 ByConity 中使用 Bucket table 时，系统会依据用户建表语句中提供的一个或者多个列、表达式整理表数据，将相同值的数据聚簇在同一个 bucket number 下。

# 使用 Bucket table 的收益

使用 cluster key 聚蔟数据在大表上可以获得以下几项收益：

1. 针对 cluster key 的点查可以过滤掉大部分数据，降低 IO 量获得更短的执行时间和更高的并发 QPS
2. 针对 cluster key 的聚合计算，计算节点可以在数据子集进行预先计算，实现更小的内存占用和更短的执行时间
3. 两张或者多张表针对 cluster key 的 join 可以获得 co-located join 的优化，极大的降低 shuffle 数据量并得到更短的执行时间

# 什么时候考虑使用 Bucket table

1. 表足够大，意味着在一个分区下的 parts 数量至少需要显著多于 worker 数量
2. 查询语句可以从上述收益点中获益

