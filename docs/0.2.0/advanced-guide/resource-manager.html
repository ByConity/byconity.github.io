<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.2.0 plugin-docs plugin-id-default docs-doc-id-advanced-guide/resource-manager">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">resource manager | ByConity</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://byconity.github.io/img/byconity-social-card.png"><meta data-rh="true" name="twitter:image" content="https://byconity.github.io/img/byconity-social-card.png"><meta data-rh="true" property="og:url" content="https://byconity.github.io/docs/0.2.0/advanced-guide/resource-manager"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.2.0"><meta data-rh="true" name="docsearch:version" content="0.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.2.0"><meta data-rh="true" property="og:title" content="resource manager | ByConity"><meta data-rh="true" name="description" content="The Resource Manager (RM) component is used for unified management and scheduling of ByConity computing resources, and is the core component to achieve resource elasticity and improve resource utilization."><meta data-rh="true" property="og:description" content="The Resource Manager (RM) component is used for unified management and scheduling of ByConity computing resources, and is the core component to achieve resource elasticity and improve resource utilization."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://byconity.github.io/docs/0.2.0/advanced-guide/resource-manager"><link data-rh="true" rel="alternate" href="https://byconity.github.io/docs/0.2.0/advanced-guide/resource-manager" hreflang="en"><link data-rh="true" rel="alternate" href="https://byconity.github.io/zh-cn/docs/0.2.0/advanced-guide/resource-manager" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://byconity.github.io/docs/0.2.0/advanced-guide/resource-manager" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Y8UJSN6KEB-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ByConity RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ByConity Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BYY7CCPJZ6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BYY7CCPJZ6",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ByConity" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.25c3bd5d.css">
<link rel="preload" href="/assets/js/runtime~main.488d2ad2.js" as="script">
<link rel="preload" href="/assets/js/main.51896293.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_Rzz1" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_hfek"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_DeRy themedImage--light_hbln"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_DeRy themedImage--dark_qgR1"></div><b class="navbar__title text--truncate">ByConity</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/0.2.0/introduction/main-principle-concepts">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/users">Users</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.2.0/introduction/main-principle-concepts">0.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/introduction/what-is-byconity">0.3.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.2.0/advanced-guide/resource-manager">0.2.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="/docs/0.2.0/advanced-guide/resource-manager" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-cn/docs/0.2.0/advanced-guide/resource-manager" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div><a href="https://github.com/ByConity/ByConity" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"><span>GitHub</span></a><div class="searchBox_mmj0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_NWrx docsWrapper_oNqO"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_LsNq" type="button"></button><div class="docPage_fHU4"><aside class="theme-doc-sidebar-container docSidebarContainer_jEGB"><div class="sidebarViewport_Gc0S"><div class="sidebar_uCr1 sidebarWithHideableNavbar_P_fD"><a tabindex="-1" class="sidebarLogo_XXeG" href="/"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_DeRy themedImage--light_hbln"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_DeRy themedImage--dark_qgR1"><b>ByConity</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_s63m"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/introduction/main-principle-concepts">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/quick-start/basic-database-operations">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/sql-syntax/ansi-compatibility">SQL Syntax</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/basic-guide/background-task-management">Basic Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/0.2.0/advanced-guide/0.2.0_s3_upgrade_checklist">Advanced Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/0.2.0_s3_upgrade_checklist">Byconity 0.2.0 s3 storage upgrade checklist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/background-task-configuration">Background Tasks Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/bucket-table-best-practice">Bucket table best practice manual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/column-based-storage">Column Storage Design Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/complex-query-model-and-optimisation">Complex Query Models and Execution Tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/import-optimisation">Import Optimisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/ingest-column">Column ingestion query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/managing-concurrency">Transactions and Concurrency Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/query-acceleration">Query Acceleration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/query-optimiser">Query Optimizer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.2.0/advanced-guide/rbac">Role-based Access Control (RBAC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.2.0/advanced-guide/resource-manager">resource manager</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/community/become-maintainer">Community</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/deployment/deployment-requirements">Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.2.0/benchmarks/2023-09-13-byconity-tpcds-benchmark-olap/2023-09-13-byconity-vs-other-olap-engines-tpc-ds-benchmarks">Benchmarks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_b8RI"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_QMJw"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->ByConity<!-- --> <b>0.2.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/introduction/what-is-byconity">latest version</a></b> (<!-- -->0.3.x<!-- -->).</div></div><div class="docItemContainer_EkDS"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_dvLu" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_ObZR"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">resource manager</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.2.0</span><div class="tocCollapsible_Iw4v theme-doc-toc-mobile tocMobile_L4iJ"><button type="button" class="clean-btn tocCollapsibleButton_Omde">On this page</button></div><div class="theme-doc-markdown markdown"><h1>resource manager</h1><p>The Resource Manager (RM) component is used for unified management and scheduling of ByConity computing resources, and is the core component to achieve resource elasticity and improve resource utilization.</p><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="target">Target<a href="#target" class="hash-link" aria-label="Direct link to Target" title="Direct link to Target">​</a></h2><p>The core design goals of ByConity Explorer are as follows:</p><ol><li>Able to manage and schedule computing resources to improve resource utilization.</li><li>It can collect the monitoring data of computing group VW, which is convenient for resource scheduling based on load.</li><li>It can provide scheduling functions for queries, INSERTs, and various background tasks.</li><li>Able to coordinate different VWs and dynamically allocate VW resources.</li><li>Realize resource pooling and elastic scaling functions.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="the-hierarchy-of-computing-resources">The hierarchy of computing resources<a href="#the-hierarchy-of-computing-resources" class="hash-link" aria-label="Direct link to The hierarchy of computing resources" title="Direct link to The hierarchy of computing resources">​</a></h2><p>In order to achieve the above goals, we divide and manage computing resources hierarchically.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="compute-node-worker">Compute Node Worker<a href="#compute-node-worker" class="hash-link" aria-label="Direct link to Compute Node Worker" title="Direct link to Compute Node Worker">​</a></h3><p>In <a href="/docs/0.2.0/introduction/main-principle-concepts">Main Principle Concepts</a>, we know that the smallest computing unit in ByConity computing resources is a Worker node, which corresponds to a Kubenetes Pod.</p><p>After Worker starts, it will periodically report heartbeat information to RM, including:</p><ul><li>Identification information, such as WORKER_ID, WORKER_GROUP_ID, VIRTUAL_WAREHOUSE_ID, etc.</li><li>Node physical load information, such as CPU usage, MEMORY usage, etc.</li><li>Query load information, such as the number of running queries, the number of queued queries, etc.</li></ul><p>RM maintains and updates the status of each Worker in time, and routes and schedules the query according to the identity and load information of the Worker when processing the query.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="compute-group-replicas-worker-group">Compute Group Replicas Worker Group<a href="#compute-group-replicas-worker-group" class="hash-link" aria-label="Direct link to Compute Group Replicas Worker Group" title="Direct link to Compute Group Replicas Worker Group">​</a></h3><p>A Worker Group (WG for short) is a computing resource used to actually process a query request, and it corresponds to a Kubenetes StatefulSet.</p><p>A computing group replica consists of multiple workers, and the WORKER_GROUP_ID in each worker&#x27;s identity indicates the worker group to which it belongs. At the same time, by summarizing the load information of all Workers in the Worker Group, we can obtain the aggregated load information of the Worker Group, such as average CPU usage, maximum CPU usage, average MEMORY usage, maximum MEMORY usage, etc.</p><p>There are two types of computing group replicas: Physical and Shared.</p><ul><li>The copy of the physical computing group (Physical Worker Group) is bound to a set of actual physical resources (Kubernetes StatefulSet).</li><li>The shared computing group copy (Shared Worker Group) is not bound to physical resources, but points to another Physical Worker Group by reference. Shared Worker Group has independent identification information, namely WOKRER_GROUP_ID, and the load information is the load information of the corresponding Physical Worker Group.</li></ul><p>When we need to manage (create, delete, etc.) a copy of a physical computing group, in addition to modifying the meta information inside ByConity, we also need to perform the corresponding K8s operations. To manage a shared computing group copy, you only need to modify the meta-information of the computing group copy, because the shared computing group copy does not own any physical resources.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="virtual-warehouse">Virtual Warehouse<a href="#virtual-warehouse" class="hash-link" aria-label="Direct link to Virtual Warehouse" title="Direct link to Virtual Warehouse">​</a></h3><p>A computing group (Virtual Warehouse, referred to as VW) consists of multiple copies of computing groups with the same configuration. The VIRTUAL_WAREHOUSE_ID in the Worker ID identifies the VW to which it belongs.</p><p>VW is divided into two types: Default and Write.</p><ul><li>The Default VW is responsible for processing the user&#x27;s normal SELECT query, and the Default VW is also called the Read VW.</li><li>Write VW is responsible for processing users&#x27; INSERT queries, and running ByConity&#x27;s background tasks such as Merge and Mutate (link background tasks).</li></ul><p>The distinction between Default and Write VW enables ByConity to easily separate reads and writes to maximize query performance.</p><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="scheduling-process">Scheduling process<a href="#scheduling-process" class="hash-link" aria-label="Direct link to Scheduling process" title="Direct link to Scheduling process">​</a></h2><p>Each ByConity user table needs to specify its own default VW and write VW. After that, RM will undertake all the scheduling work of this table: SELECT query, INSERT query, background tasks, etc.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="select-query-scheduling-process">SELECT Query scheduling process<a href="#select-query-scheduling-process" class="hash-link" aria-label="Direct link to SELECT Query scheduling process" title="Direct link to SELECT Query scheduling process">​</a></h3><p>When the server finds that the Query is a SELECT Query, it needs to select a WG from the Default VW of the table to process the query.</p><p><img loading="lazy" src="/assets/images/boxcnbZbcFxobIoWtbHHOFEBuAd-1d14622bd55e66a3f8046e5ef7c268b7.png" width="852" height="232" class="img_astN"></p><p>As shown in the figure, suppose there are 2 Physical WGs in the Default VW of the table, and 1 Shared WG (pointing to the Physical WG in another VW). Since it is a SELECT query, we need to select 1 WG to process the query. Physical WG 1 is currently the least loaded WG and is selected to handle the query.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="insert-query-scheduling-process">INSERT Query scheduling process<a href="#insert-query-scheduling-process" class="hash-link" aria-label="Direct link to INSERT Query scheduling process" title="Direct link to INSERT Query scheduling process">​</a></h3><p>When the server finds that the Query is an INSERT Query, it needs to select a Worker from the table&#x27;s Write VW to process the query.</p><p><img loading="lazy" src="/assets/images/boxcn1vUjQxIvpWIT2zplXffgyg-89083ddae792a9be640450d97ec50add.png" width="852" height="232" class="img_astN"></p><p>As shown in the figure, suppose there are 2 Physical WGs in the Write VW of the table, and each WG contains 3 Workers. Because it is an INSERT query, we need to choose a Worker to process the query. Worker 3 currently has the lowest load and is selected to process the query.</p><h3 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="scheduling-process-of-background-tasks">Scheduling process of background tasks<a href="#scheduling-process-of-background-tasks" class="hash-link" aria-label="Direct link to Scheduling process of background tasks" title="Direct link to Scheduling process of background tasks">​</a></h3><p>In addition to processing user queries, the server also needs to schedule background tasks for the table, such as continuously performing Merge on the table data in the background to improve query performance.</p><p><img loading="lazy" src="/assets/images/boxcnHyC6wY1ypvpTr7TkWHtLng-26c8a7ee98d824e6a5d8a77abf07927d.png" width="852" height="204" class="img_astN"></p><p>As shown in the figure, the Server generates a Merge task and needs to select a Worker from the Write VW to process it. Worker 3 currently has the lowest load and is selected to execute the Merge task.</p><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="high-availability--compatible-upgrade">High Availability &amp; Compatible Upgrade<a href="#high-availability--compatible-upgrade" class="hash-link" aria-label="Direct link to High Availability &amp; Compatible Upgrade" title="Direct link to High Availability &amp; Compatible Upgrade">​</a></h2><ol><li>Adopt a simple multi-copy master-slave configuration.</li><li>The worker&#x27;s heartbeat is only sent to the master node, and the server&#x27;s request is only processed by the master node.</li><li>When the primary node goes down, the standby node takes over the service and synchronizes the necessary metadata from the KV database.</li><li>Since the Server has a cache of VW, WG, and Worker information, even if the RM is unavailable for a short time, the service node can still use the cached data to continue working.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="flexible-sharing-of-computing-resources">Flexible sharing of computing resources<a href="#flexible-sharing-of-computing-resources" class="hash-link" aria-label="Direct link to Flexible sharing of computing resources" title="Direct link to Flexible sharing of computing resources">​</a></h2><p>Scheduling queries and background tasks based on Worker load information makes the WG and Worker loads in a VW more balanced. In addition, we can achieve elastic sharing of resources between VWs by creating a suitable Shared WG (Shared Computing Group).</p><p>When the overall resource utilization of a Physical WG is low, a Shared WG can be created in other VWs that require more computing resources and point to the Physical WG. In this way, this Physical WG can be used by other VW&#x27;s queries or tasks.</p><p><img loading="lazy" src="/assets/images/boxcnwYSsOLigmR3d9nblBrpLFg-6bdf100b7fb1d9918fb538140f27616e.png" width="852" height="204" class="img_astN"></p><p>As shown in the figure, in Default VW 1, we created a shared computing group Shared WG 3, which does not own any actual physical computing resources, but points to another physical computing group Physical WG 6 in Default VW 3. Shared WG 3 has exactly the same load information as Physical WG 6. When Default VW 1 makes scheduling decisions, Shared WG 3 (or its Worker) can be selected to process SELECT queries (or INSERT queries, background tasks). Ultimately, queries or background tasks are actually routed to Physical WG 6 for processing.</p><h2 class="anchor anchorWithHideOnScrollNavbar_l3HI" id="reference-documentation">Reference Documentation<a href="#reference-documentation" class="hash-link" aria-label="Direct link to Reference Documentation" title="Direct link to Reference Documentation">​</a></h2><p><a target="_blank" href="/assets/files/云原生数据仓库ByteHouse技术白皮书V1.0-3cbc2e07938a5127362b057566748f39.pdf">Cloud Native Data Warehouse ByteHouse Technical White Paper V1.0 (Chinese)</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_HAaO padding--none margin-left--sm"><li class="tag_Ut5_"><a class="tag_sQub tagRegular_dfhI" href="/docs/0.2.0/tags/docs">Docs</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ByConity/byconity.github.io/tree/main/versioned_docs/version-0.2.0/advanced-guide/resource-manager.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_O9Og" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_DEFe"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.2.0/advanced-guide/rbac"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Role-based Access Control (RBAC)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.2.0/community/become-maintainer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to Become a Maintainer and TSC Member of ByConity</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Q7NC thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#target" class="table-of-contents__link toc-highlight">Target</a></li><li><a href="#the-hierarchy-of-computing-resources" class="table-of-contents__link toc-highlight">The hierarchy of computing resources</a><ul><li><a href="#compute-node-worker" class="table-of-contents__link toc-highlight">Compute Node Worker</a></li><li><a href="#compute-group-replicas-worker-group" class="table-of-contents__link toc-highlight">Compute Group Replicas Worker Group</a></li><li><a href="#virtual-warehouse" class="table-of-contents__link toc-highlight">Virtual Warehouse</a></li></ul></li><li><a href="#scheduling-process" class="table-of-contents__link toc-highlight">Scheduling process</a><ul><li><a href="#select-query-scheduling-process" class="table-of-contents__link toc-highlight">SELECT Query scheduling process</a></li><li><a href="#insert-query-scheduling-process" class="table-of-contents__link toc-highlight">INSERT Query scheduling process</a></li><li><a href="#scheduling-process-of-background-tasks" class="table-of-contents__link toc-highlight">Scheduling process of background tasks</a></li></ul></li><li><a href="#high-availability--compatible-upgrade" class="table-of-contents__link toc-highlight">High Availability &amp; Compatible Upgrade</a></li><li><a href="#flexible-sharing-of-computing-resources" class="table-of-contents__link toc-highlight">Flexible sharing of computing resources</a></li><li><a href="#reference-documentation" class="table-of-contents__link toc-highlight">Reference Documentation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row"><div class="col col--3"><img src="/img/footer-logo.svg" alt="ByConity" class="themedImage_DeRy themedImage--light_hbln footer__logo"><img src="/img/footer-logo.svg" alt="ByConity" class="themedImage_DeRy themedImage--dark_qgR1 footer__logo"></div><div class="col"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/main-principle-concepts">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community">Community</a></li><li class="footer__item"><a class="footer__link-item" href="/users">Users</a></li><li class="footer__item"><a href="https://space.bilibili.com/2065226922?spm_id_from=333.1007.0.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LBPb"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/ByConity/ByConity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LBPb"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ByteDance.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.488d2ad2.js"></script>
<script src="/assets/js/main.51896293.js"></script>
</body>
</html>