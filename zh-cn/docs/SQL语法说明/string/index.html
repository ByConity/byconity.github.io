<!DOCTYPE HTML>
<html lang="en,zh-cn,default">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="String, ByConity keywords">
    <meta name="description" content="theme.home.header.description">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>String | ByConity</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByConity" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ByConity</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/zh-cn/docs" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Docs</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a target="_blank" rel="noopener" href="https://github.com/byconity" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>Community</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ByConity</div>
        <div class="logo-desc">
            
            theme.home.header.description
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/zh-cn/docs" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Docs
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a target="_blank" rel="noopener" href="https://github.com/byconity" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			Community
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/byConity" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Contribute with us
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/byConity" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Contribute with us" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/banner/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">String</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Docs/">
                                <span class="chip bg-color">Docs</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Docs/" class="post-category">
                                Docs
                            </a>
                        
                            <a href="/categories/Docs/SQL-Syntax/" class="post-category">
                                SQL_Syntax
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2023-01-09
                </div>
                

                

                

                

                
                
                <div class="info-break-policy">
                    
                    <style>
                        .github-edit-link {
                            padding: 0 2px;
                            color: #42b983;
                            font-weight: 500;
                            text-decoration: underline;
                            word-wrap: break-word;
                        }
                    </style>
                    <a class="github-edit-link" href="https://github.com/byConity/byconity.github.io/edit/main/source/_posts/SQL%E8%AF%AD%E6%B3%95%E8%AF%B4%E6%98%8E/string.md" target="_blank">
                        <i class="far fa-edit fa-fw"></i>Edit post
                    </a>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="string"><a href="#string" class="headerlink" title="string"></a>string</h1><blockquote>
<p>Notice:<br>Some of the examples below are referenced from <a target="_blank" rel="noopener" href="https://clickhouse.com/docs/en/sql-reference/functions/">ClickHouse Documentation</a> but have been adapted and modified to work in ByteHouse.</p>
</blockquote>
<h2 id="CHARACTER-LENGTH"><a href="#CHARACTER-LENGTH" class="headerlink" title="CHARACTER_LENGTH"></a>CHARACTER_LENGTH</h2><p>Returns the length of a string in Unicode code points (not in characters), assuming that the <code>string</code> contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CHARACTER_LENGTH(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The length of Char.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select CHARACTER_LENGTH(&#x27;abcdef123&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─CHARACTER_LENGTH(&#x27;abcdef123&#x27;)─┐</span><br><span class="line">│ 9                             │</span><br><span class="line">└───────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TODO：is this one same as CHAR_LENGTH ?</p>
<h2 id="CHAR-LENGTH"><a href="#CHAR-LENGTH" class="headerlink" title="CHAR_LENGTH"></a>CHAR_LENGTH</h2><p>Returns the length of a string in Unicode code points (not in characters), assuming that the <code>string</code> contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CHAR_LENGTH(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The length of char.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT CHAR_LENGTH(&#x27;abcdef123&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─CHAR_LENGTH(&#x27;abcdef123&#x27;)─┐</span><br><span class="line">│ 9                        │</span><br><span class="line">└──────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="alphaTokens"><a href="#alphaTokens" class="headerlink" title="alphaTokens"></a>alphaTokens</h2><p>Selects substrings of consecutive bytes from the ranges a-z and A-Z.Returns an array of substrings.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alphaTokens(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The array of substrings.</li>
</ul>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT alphaTokens(&#x27;abca1abc&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─alphaTokens(&#x27;abca1abc&#x27;)─┐</span><br><span class="line">│ [abca, abc]             │</span><br><span class="line">└─────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="appendTrailingCharIfAbsent"><a href="#appendTrailingCharIfAbsent" class="headerlink" title="appendTrailingCharIfAbsent"></a>appendTrailingCharIfAbsent</h2><p>If the <code>string</code> is non-empty and does not contain the <code>character</code> at the end, it appends the <code>character</code> to the end.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">appendTrailingCharIfAbsent(string, character)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>character</code> – the character.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The character appended to string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT appendTrailingCharIfAbsent(&#x27;abc&#x27;, &#x27;2&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─appendTrailingCharIfAbsent(&#x27;abc&#x27;, &#x27;2&#x27;)─┐</span><br><span class="line">│ abc2                                   │</span><br><span class="line">└────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="arrayStringConcat"><a href="#arrayStringConcat" class="headerlink" title="arrayStringConcat"></a>arrayStringConcat</h2><p>Concatenates the strings listed in the array with the separator.<code>separator</code> is an optional parameter: a constant string, set to an empty string by default.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arrayStringConcat(array[, separator])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>array</code> – The array.</li>
<li><code>separator</code> – optional, separator.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The concated string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT arrayStringConcat([&#x27;abc&#x27;,&#x27;123&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─arrayStringConcat([&#x27;abc&#x27;, &#x27;123&#x27;])─┐</span><br><span class="line">│ abc123                            │</span><br><span class="line">└───────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT arrayStringConcat([&#x27;abc&#x27;, &#x27;123&#x27;], &#x27;,&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─arrayStringConcat([&#x27;abc&#x27;, &#x27;123&#x27;], &#x27;,&#x27;)─┐</span><br><span class="line">│ abc,123                                │</span><br><span class="line">└────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="base64Decode"><a href="#base64Decode" class="headerlink" title="base64Decode"></a>base64Decode</h2><p>Decode base64-encoded <code>string</code> into original string. In case of failure raises an exception.</p>
<p>Alias: <code>FROM_BASE64</code> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">base64Decode(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The decoded string.</li>
<li></li>
</ul>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT base64Decode(&#x27;SGVsbG8gQmFzZTY0&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─base64Decode(&#x27;SGVsbG8gQmFzZTY0&#x27;)─┐</span><br><span class="line">│ Hello Base64                     │</span><br><span class="line">└──────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="base64Encode"><a href="#base64Encode" class="headerlink" title="base64Encode"></a>base64Encode</h2><p>Encodes <code>string</code> into base64</p>
<p>Alias: <code>TO_BASE64</code> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">base64Encode(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The encoded string.</li>
<li></li>
</ul>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT base64Encode(&#x27;Hello Base64&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─base64Encode(&#x27;Hello Base64&#x27;)─┐</span><br><span class="line">│ SGVsbG8gQmFzZTY0             │</span><br><span class="line">└──────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>Concatenates the strings listed in the arguments, without a separator.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">concat(s1, s2, ...)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s1</code>, <code>s2</code> … – Values of type String or FixedString.</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>The string that results from concatenating the arguments.</li>
</ul>
<p>If any of argument values is <code>NULL</code> , <code>concat</code> returns <code>NULL</code> .</p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT concat(&#x27;Hello, &#x27;, &#x27;World!&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─concat(&#x27;Hello, &#x27;, &#x27;World!&#x27;)─┐</span><br><span class="line">│ Hello, World!               │</span><br><span class="line">└─────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="concatAssumeInjective"><a href="#concatAssumeInjective" class="headerlink" title="concatAssumeInjective"></a>concatAssumeInjective</h2><p>Same as concat , the difference is that you need to ensure that <code>concat(s1, s2, ...) → sn</code> is injective, it will be used for optimization of GROUP BY.</p>
<p>The function is named “injective” if it always returns different result for different values of arguments. In other words: different arguments never yield identical result.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">concatAssumeInjective(s1, s2, ...)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s1</code>, <code>s2</code> … – Values of type String or FixedString.</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>The String that results from concatenating the arguments.</li>
</ul>
<p>Note: If any of argument values is <code>NULL</code> , <code>concatAssumeInjective</code> returns <code>NULL</code> .</p>
<p><strong>Example</strong></p>
<p>Input table:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test.key_val(`key1` String, `key2` String, `value` UInt32) ENGINE = CnchMergeTree ORDER BY key2;</span><br><span class="line">INSERT INTO test.key_val VALUES (&#x27;Hello, &#x27;,&#x27;World&#x27;,1), (&#x27;Hello, &#x27;,&#x27;World&#x27;,2), (&#x27;Hello, &#x27;,&#x27;World!&#x27;,3), (&#x27;Hello&#x27;,&#x27;, World!&#x27;,2);</span><br><span class="line">SELECT * from test.key_val;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌─key1───┬─key2─────┬─value─┐</span><br><span class="line">│ Hello  │ , World! │ 2     │</span><br><span class="line">│ Hello, │ World    │ 1     │</span><br><span class="line">│ Hello, │ World    │ 2     │</span><br><span class="line">│ Hello, │ World!   │ 3     │</span><br><span class="line">└────────┴──────────┴───────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT concat(key1, key2), sum(value) FROM test.key_val GROUP BY concatAssumeInjective(key1, key2);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌─concat(key1, key2)─┬─sum(value)─┐</span><br><span class="line">│ Hello,World        │ 3          │</span><br><span class="line">│ Hello,World!       │ 3          │</span><br><span class="line">│ Hello, World!      │ 2          │</span><br><span class="line">└────────────────────┴────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="convertCharset"><a href="#convertCharset" class="headerlink" title="convertCharset"></a>convertCharset</h2><p>Returns the <code>string</code> that was converted from the encoding in <code>from</code> to the encoding in <code>to</code>.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">convertCharset(s, from, to)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>from</code> – Decoding from a character encoding type.</li>
<li><code>to</code> – Encoding to a character encoding type.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li><code>to</code> character encoding type.</li>
</ul>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT base64Encode(toString(convertCharset(&#x27;abc&#x27;, &#x27;Unicode&#x27;, &#x27;UTF-8&#x27;)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─base64Encode(toString(convertCharset(&#x27;abc&#x27;, &#x27;Unicode&#x27;, &#x27;UTF-8&#x27;)))─┐</span><br><span class="line">│ 5oWi77+9                                                          │</span><br><span class="line">└───────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="count"><a href="#count" class="headerlink" title="count"></a>count</h2><p>Counts the number of rows or not-NULL values.</p>
<p><strong>Syntax</strong></p>
<p>CNCH supports the following syntaxes for <code>count</code> :</p>
<ul>
<li><code>count(expr)</code> or <code>COUNT(DISTINCT expr)</code> .</li>
<li><code>count()</code> or <code>COUNT(*)</code> .</li>
</ul>
<p><strong>Arguments</strong></p>
<p>The function can take:</p>
<ul>
<li>Zero parameters.</li>
<li>One expression .</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>If the function is called without parameters it counts the number of rows.</li>
<li>If the expression is passed, then the function counts how many times this expression returned not null. If the expression returns a Nullable -type value, then the result of <code>count</code> stays not <code>Nullable</code> . The function returns 0 if the expression returned <code>NULL</code> for all the rows.</li>
<li>In both cases the type of the returned value is UInt64.</li>
</ul>
<p><strong>Details</strong></p>
<p>CNCH supports the <code>COUNT(DISTINCT ...)</code> syntax. The behavior of this construction depends on the count_distinct_implementation setting. It defines which of the uniq* functions is used to perform the operation. The default is the uniqExact function.</p>
<p>The <code>SELECT count() FROM table</code> query is not optimized, because the number of entries in the table is not stored separately. It chooses a small column from the table and counts the number of values in it.</p>
<p>However <code>SELECT count(nullable_column) FROM table</code> query can be optimized by enabling the optimize_functions_to_subcolumns setting. With <code>optimize_functions_to_subcolumns = 1</code> the function reads only null subcolumn instead of reading and processing the whole column data. The query <code>SELECT count(n) FROM table</code> transforms to <code>SELECT sum(NOT n.null) FROM table</code> .</p>
<p><strong>Examples</strong></p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test.test_count (id Int32) ENGINE = CnchMergeTree ORDER BY id;</span><br><span class="line">INSERT INTO test.test_count(id) VALUES(1),(2),(3),(4),(5),(5);</span><br><span class="line">select count() from test.test_count;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─count()─┐</span><br><span class="line">│ 6       │</span><br><span class="line">└─────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Example 2:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, value FROM system.settings WHERE name = &#x27;count_distinct_implementation&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─name──────────────────────────┬─value─────┐</span><br><span class="line">│ count_distinct_implementation │ uniqExact │</span><br><span class="line">└───────────────────────────────┴───────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select count(distinct(id)) from test.`test_count`;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─uniqExact(id)─┐</span><br><span class="line">│ 5             │</span><br><span class="line">└───────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This example shows that <code>count(DISTINCT num)</code> is performed by the <code>uniqExact</code> function according to the <code>count_distinct_implementation</code> setting value.</p>
<h2 id="e"><a href="#e" class="headerlink" title="e"></a>e</h2><p>Returns a Float64 number that is close to the number e.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li>N.A</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns a Float64 number that is close to the number e.</li>
</ul>
<p>Type: <code>Float64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT e();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─e()───────────────────┐</span><br><span class="line">│ 2.718281828459045e+00 │</span><br><span class="line">└───────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="empty"><a href="#empty" class="headerlink" title="empty"></a>empty</h2><p>Returns 1 for an empty string or 0 for a non-empty string.</p>
<p>A string is considered non-empty if it contains at least one byte, even if this is a space or a null byte.</p>
<p>The function also works for arrays.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">empty(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 1 for an empty string or 0 for a non-empty string.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT empty(&#x27;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─empty(&#x27;&#x27;)─┐</span><br><span class="line">│ 1         │</span><br><span class="line">└───────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT empty(&#x27;test&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─empty(&#x27;12312&#x27;)─┐</span><br><span class="line">│ 0              │</span><br><span class="line">└────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="endsWith"><a href="#endsWith" class="headerlink" title="endsWith"></a>endsWith</h2><p>Returns whether to end with the specified suffix. Returns 1 if the <code>string</code> ends with the specified <code>suffix</code>, otherwise it returns 0.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">endsWith(string, suffix)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>suffix</code> – The suffix, test if <code>s</code> ends with the specified suffix.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 1 if the string ends with the specified suffix, otherwise it returns 0.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT endsWith(&#x27;test_end_with&#x27;,&#x27;with&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─endsWith(&#x27;test_end_with&#x27;, &#x27;with&#x27;)─┐</span><br><span class="line">│ 1                                 │</span><br><span class="line">└───────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT endsWith(&#x27;test_end_with&#x27;,&#x27;error&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─endsWith(&#x27;test_end_with&#x27;, &#x27;error&#x27;)─┐</span><br><span class="line">│ 0                                  │</span><br><span class="line">└────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="extract"><a href="#extract" class="headerlink" title="extract"></a>extract</h2><p>Extracts a fragment of a string using a regular expression. If <code>string</code> does not match the <code>pattern</code> regex, an empty string is returned. If the regex does not contain subpatterns, it takes the fragment that matches the entire regex. Otherwise, it takes the fragment that matches the first subpattern.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extract(haystack, pattern)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The regular expression pattern</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The matched string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT extract(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;,&#x27;&lt;.*?&gt;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─extract(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;&#x27;, &#x27;&lt;.*?&gt;&#x27;)─┐</span><br><span class="line">│ &lt;regex1&gt;                                   │</span><br><span class="line">└────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="extractAll"><a href="#extractAll" class="headerlink" title="extractAll"></a>extractAll</h2><p>Extracts all the fragments of a string using a regular expression. If <code>string</code> does not match the <code>pattern</code> regex, an empty string is returned. Returns an array of strings consisting of all matches to the regex. In general, the behavior is the same as the <code>extract</code> function (it takes the first subpattern, or the entire expression if there isn’t a subpattern).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extractAll(string, pattern)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The regular expression pattern</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The matched string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT extractAll(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;,&#x27;&lt;.*?&gt;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─extractAll(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;, &#x27;&lt;.*?&gt;&#x27;)─┐</span><br><span class="line">│ [&lt;regex1&gt;, &lt;regex2&gt;]                             │</span><br><span class="line">└──────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lcase"><a href="#lcase" class="headerlink" title="lcase"></a>lcase</h2><p>Converts ASCII Latin symbols in a <code>string</code> to lowercase.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lcase(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in lowercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT lcase(&#x27;ABCdef&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─lcase(&#x27;ABCdef&#x27;)─┐</span><br><span class="line">│ abcdef          │</span><br><span class="line">└─────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>Returns the length of a string in integer,also the function works for arrays.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">length(x)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>x</code> – The string or array.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The length of a string or array.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT length(&#x27;Hello&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─length(&#x27;Hello&#x27;)─┐</span><br><span class="line">│ 5               │</span><br><span class="line">└─────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT length([1,2,3,4]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─length([1, 2, 3, 4])─┐</span><br><span class="line">│ 4                    │</span><br><span class="line">└──────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lengthUTF8"><a href="#lengthUTF8" class="headerlink" title="lengthUTF8"></a>lengthUTF8</h2><p>Returns the length of a string in integer, assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it does not throw an exception).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lengthUTF8(x)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>x</code> – The string or array.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The length of a string or array.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<p>encodeing ‘Hello test’ to UTF-8, we can get <code>\x48\x65\x6C\x6C\x6F\x20\x74\x65\x73\x74</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT lengthUTF8(&#x27;\x48\x65\x6C\x6C\x6F\x20\x74\x65\x73\x74&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─lengthUTF8(&#x27;Hello test&#x27;)─┐</span><br><span class="line">│ 10                       │</span><br><span class="line">└──────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="like"><a href="#like" class="headerlink" title="like"></a>like</h2><p>like(string, pattern), string LIKE pattern operator checks whether a string matches a simple regular expression.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">like(string, pattern)</span><br><span class="line">string LIKE pattern</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The string matches a simple regular expression.</li>
</ul>
<p>The regular expression can contain the metasymbols <code>%</code> and <code>_</code> .</p>
<p><code>%</code> indicates any quantity of any bytes (including zero characters).</p>
<p><code>_</code> indicates any one byte.</p>
<p>Use the backslash ( <code>\</code> ) for escaping metasymbols. See the note on escaping in the description of the ‘match’ function.</p>
<p>For regular expressions like <code>%needle%</code> , the code is more optimal and works as fast as the <code>position</code> function.</p>
<p>For other regular expressions, the code is the same as for the ‘match’ function.</p>
<p><strong>Returned value</strong></p>
<ul>
<li>Either 1 or 0.</li>
</ul>
<p>Type:<code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT like(&#x27;abc&#x27;,&#x27;ab&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Type</p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─like(&#x27;abc&#x27;, &#x27;ab&#x27;)─┐</span><br><span class="line">│ 0                 │</span><br><span class="line">└───────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT &#x27;abc&#x27; LIKE &#x27;ab%&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─like(&#x27;abc&#x27;, &#x27;ab%&#x27;)─┐</span><br><span class="line">│ 1                  │</span><br><span class="line">└────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h2><p>The locate() function returns the position of the first occurrence of a substring in a <code>string</code>.</p>
<p><strong>Alias</strong> for position(string, substring)</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`locate(string, substring[, start_pos])` .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>the position of the first occurrence of a substring in a string.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT locate(&#x27;Hello World&#x27;, &#x27;Wor&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─locate(&#x27;Hello World&#x27;, &#x27;Wor&#x27;)─┐</span><br><span class="line">│ 7                            │</span><br><span class="line">└──────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TODO: need to verify it after resolved [Locate does not support start_pos] <a target="_blank" rel="noopener" href="https://jira-sg.bytedance.net/browse/BYT-3176">https://jira-sg.bytedance.net/browse/BYT-3176</a>, this task will be postpone till the final document on function part is ready</p>
<h2 id="lower"><a href="#lower" class="headerlink" title="lower"></a>lower</h2><p>Converts ASCII Latin symbols in a string to lowercase.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lower(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in lowercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT lower(&#x27;ABCdef&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─lower(&#x27;ABCdef&#x27;)─┐</span><br><span class="line">│ abcdef          │</span><br><span class="line">└─────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lowerUTF8"><a href="#lowerUTF8" class="headerlink" title="lowerUTF8"></a>lowerUTF8</h2><p>Converts a string to lowercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p>
<p>Note: It does not detect the language. So for Turkish the result might not be exactly correct.</p>
<p>If the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.</p>
<p>If the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lowerUTF8(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in lowercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<p>encodeing ‘Hello test’ to UTF-8, we can get ‘\x48\x65\x6C\x6C\x6F\x20\x74\x65\x73\x74’.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT lowerUTF8(&#x27;\x48\x65\x6C\x6C\x6F\x20\x74\x65\x73\x74&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─lowerUTF8(&#x27;Hello test&#x27;)─┐</span><br><span class="line">│ hello test              │</span><br><span class="line">└─────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><p>Checks whether the string matches the <code>pattern</code> regular expression. A <code>re2</code> regular expression. The <a target="_blank" rel="noopener" href="https://github.com/google/re2/wiki/Syntax">syntax</a> of the <code>re2</code> regular expressions is more limited than the syntax of the Perl regular expressions.</p>
<p>Note that the backslash symbol ( <code>\</code> ) is used for escaping in the regular expression. The same symbol is used for escaping in string literals. So in order to escape the symbol in a regular expression, you must write two backslashes () in a string literal.</p>
<p>The regular expression works with the string as if it is a set of bytes. The regular expression can’t contain null bytes.</p>
<p>For patterns to search for substrings in a string, it is better to use LIKE or ‘position’, since they work much faster.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">match(string, pattern)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 0 if it does not match, or 1 if it matches.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT match(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;,&#x27;&lt;.*?&gt;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─match(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;, &#x27;&lt;.*?&gt;&#x27;)─┐</span><br><span class="line">│ 1                                           │</span><br><span class="line">└─────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="mid"><a href="#mid" class="headerlink" title="mid"></a>mid</h2><p>Returns a substring starting from the ‘offset’ index that is ‘length’ long. Character indexing starts from one (as in standard SQL). The ‘offset’ and ‘length’ arguments must be constants.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mid(s, offset, length)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s</code> – The string.</li>
<li><code>offset</code> – The substring starting offset.</li>
<li><code>length</code> – The length of substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The substring.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT mid(&#x27;Hello CNCH&#x27;,7,4);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─mid(&#x27;Hello CNCH&#x27;, 7, 4)─┐</span><br><span class="line">│ CNCH                    │</span><br><span class="line">└─────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiFuzzyMatchAny"><a href="#multiFuzzyMatchAny" class="headerlink" title="multiFuzzyMatchAny"></a>multiFuzzyMatchAny</h2><p>The same as <code>multiMatchAny</code> , but returns 1 if any pattern matches the string within a constant <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Edit_distance">edit distance</a> . This function is also in an experimental mode and can be extremely slow. For more information see <a target="_blank" rel="noopener" href="https://intel.github.io/hyperscan/dev-reference/compilation.html#approximate-matching">hyperscan documentation</a> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiFuzzyMatchAny(string, distance, [pattern_1, pattern_2, …, pattern_n])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>‘’’<strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>distance</code> – The integer, please refer to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Edit_distance">edit distance</a>.</li>
<li><code>pattern</code> – The pattern using in fuzzy match.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>returns 1 if any pattern matches the string, otherwise 0.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiFuzzyMatchAny(&#x27;123ab12cdef&#x27;,2,[&#x27;abcd&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Note: the distince is 2 due to the length of <code>12</code> in <code>ab12cd</code></p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiFuzzyMatchAny(&#x27;123ab12cdef&#x27;, 2, [&#x27;abcd&#x27;])─┐</span><br><span class="line">│ 1                                              │</span><br><span class="line">└────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiFuzzyMatchAnyIndex"><a href="#multiFuzzyMatchAnyIndex" class="headerlink" title="multiFuzzyMatchAnyIndex"></a>multiFuzzyMatchAnyIndex</h2><p>The same as <code>multiFuzzyMatchAny</code> , but returns any index that matches the string within a constant edit distance.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiFuzzyMatchAnyIndex(string, distance, [pattern_1, pattern_2, …, pattern_n])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>‘’’<strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>distance</code> – The integer, please refer to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Edit_distance">edit distance</a>.</li>
<li><code>pattern</code> – The pattern using in fuzzy match.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>returns returns any index that matches the string.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiFuzzyMatchAnyIndex(&#x27;111333444CN1CH&#x27;,1,[&#x27;abc&#x27;,&#x27;def&#x27;,&#x27;CNCH&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Note: the distince is 1 due to the length of <code>1</code> in <code>CN1CH</code></p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiFuzzyMatchAnyIndex(&#x27;111333444CN1CH&#x27;, 1, [&#x27;abc&#x27;, &#x27;def&#x27;, &#x27;CNCH&#x27;])─┐</span><br><span class="line">│ 3                                                                    │</span><br><span class="line">└──────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiMatchAny"><a href="#multiMatchAny" class="headerlink" title="multiMatchAny"></a>multiMatchAny</h2><p>multiMatchAny(haystack, [pattern_1, pattern_2, …, pattern_n])</p>
<p>The same as <code>match</code> , but returns 0 if none of the regular expressions are matched and 1 if any of the patterns matches. It uses <a target="_blank" rel="noopener" href="https://github.com/intel/hyperscan">hyperscan</a> library. For patterns to search substrings in a string, it is better to use <code>multiSearchAny</code> since it works much faster.</p>
<p>Note: The length of any of the <code>haystack</code> string must be less than 232 bytes otherwise the exception is thrown. This restriction takes place because of hyperscan API.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiMatchAny(string, [pattern_1, pattern_2, …, pattern_n])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 0 if it does not match, or 1 if it matches.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiMatchAny(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;,[&#x27;&lt;.*?&gt;&#x27;,&#x27;error_patten&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiMatchAny(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;, [&#x27;&lt;.*?&gt;&#x27;, &#x27;error_patten&#x27;])─┐</span><br><span class="line">│ 1                                                                     │</span><br><span class="line">└───────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiMatchAnyIndex"><a href="#multiMatchAnyIndex" class="headerlink" title="multiMatchAnyIndex"></a>multiMatchAnyIndex</h2><p>The same as <code>multiMatchAny</code> , but returns any index that matches the string.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiMatchAnyIndex(string, [pattern_1, pattern_2, …, pattern_n])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns any index that matches the string.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiMatchAnyIndex(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;,[&#x27;error_patten&#x27;, &#x27;&lt;.*?&gt;&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiMatchAnyIndex(&#x27;abc&lt;regex1&gt;abc&lt;regex2&gt;abc&#x27;, [&#x27;error_patten&#x27;, &#x27;&lt;.*?&gt;&#x27;])─┐</span><br><span class="line">│ 2                                                                          │</span><br><span class="line">└────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiSearchAllPositions"><a href="#multiSearchAllPositions" class="headerlink" title="multiSearchAllPositions"></a>multiSearchAllPositions</h2><p>The same as position but returns <code>Array</code> of positions of the found corresponding substrings in the string. Positions are indexed starting from 0.</p>
<p>The search is performed on sequences of bytes without respect to string encoding and collation.</p>
<ul>
<li>For case-insensitive ASCII search, use the function <code>multiSearchAllPositionsCaseInsensitive</code> .</li>
<li>For search in UTF-8, use the function <a target="_blank" rel="noopener" href="https://bytedance.feishu.cn/docs/doccnUTIuxNrSuriPrZLQgGzmob#multiSearchAllPositionsUTF8">multiSearchAllPositionsUTF8</a> .</li>
<li>For case-insensitive UTF-8 search, use the function multiSearchAllPositionsCaseInsensitiveUTF8.</li>
</ul>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiSearchAllPositions(string, [substring_1, substring_2, ..., Substring_n])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — The string, in which substring will to be searched. String .</li>
<li><code>substring</code> — Substring to be searched. String .</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Array of starting positions in (counting from 1), if the corresponding substring was found and 0 if not found.</li>
</ul>
<p>Type: <code>Array(UInt64)</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiSearchAllPositions(&#x27;Hello, World!&#x27;, [&#x27;hello&#x27;, &#x27;!&#x27;, &#x27;world&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiSearchAllPositions(&#x27;Hello, World!&#x27;, [&#x27;hello&#x27;, &#x27;!&#x27;, &#x27;world&#x27;])─┐</span><br><span class="line">│ [0, 13, 0]                                                        │</span><br><span class="line">└───────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiSearchAllPositionsUTF8"><a href="#multiSearchAllPositionsUTF8" class="headerlink" title="multiSearchAllPositionsUTF8"></a>multiSearchAllPositionsUTF8</h2><p>Please refer to <code>multiSearchAllPositions</code> .## multiSearchAny<br>Returns 1, if at least one string needle_i matches the string <code>string</code> and 0 otherwise.</p>
<p>For a case-insensitive search or&#x2F;and in UTF-8 format use functions <code>multiSearchAnyCaseInsensitive, multiSearchAnyUTF8, multiSearchAnyCaseInsensitiveUTF8</code>.</p>
<p>Note:</p>
<p>In all <code>multiSearch*</code> functions the number of patterns should be less than 28 because of implementation specification.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiSearchAny(string, [pattern_1, pattern_2, …, pattern_n]) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 1, if at least one pattern matches the string <code>string</code> and 0 otherwise.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiSearchAny(&#x27;can_you_find_CNCH?&#x27;,[&#x27;abc&#x27;,&#x27;CNCH&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiSearchAny(&#x27;can_you_find_CNCH?&#x27;, [&#x27;abc&#x27;, &#x27;CNCH&#x27;])─┐</span><br><span class="line">│ 1                                                     │</span><br><span class="line">└───────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiSearchFirstIndex"><a href="#multiSearchFirstIndex" class="headerlink" title="multiSearchFirstIndex"></a>multiSearchFirstIndex</h2><p>Returns the index <code>i</code> (starting from 1) of the leftmost found pattern_i in the <code>string</code> and 0 otherwise.</p>
<p>For a case-insensitive search or&#x2F;and in UTF-8 format use functions <code>multiSearchFirstIndexCaseInsensitive, multiSearchFirstIndexUTF8, multiSearchFirstIndexCaseInsensitiveUTF8</code> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiSearchFirstIndex(string, [pattern_1, pattern_2, …, pattern_n]) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns the index <code>i</code> (starting from 1) of the leftmost found pattern_i in the <code>string</code> and 0 otherwise.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiSearchFirstIndex(&#x27;which_pattern_matchs_CNCH?&#x27;,[&#x27;abc&#x27;,&#x27;CNCH&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiSearchFirstIndex(&#x27;which_pattern_matchs_CNCH?&#x27;, [&#x27;abc&#x27;, &#x27;CNCH&#x27;])─┐</span><br><span class="line">│ 2                                                                    │</span><br><span class="line">└──────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="multiSearchFirstPosition"><a href="#multiSearchFirstPosition" class="headerlink" title="multiSearchFirstPosition"></a>multiSearchFirstPosition</h2><p>The same as <code>position</code> but returns the leftmost offset of the string that is matched to some of the substring.</p>
<p>For a case-insensitive search or&#x2F;and in UTF-8 format use functions <code>multiSearchFirstPositionCaseInsensitive, multiSearchFirstPositionUTF8, multiSearchFirstPositionCaseInsensitiveUTF8</code> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiSearchFirstPosition(string, [pattern_1, pattern_2, …, pattern_n]) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>substring</code> – The substring for matching.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns the index <code>i</code> (starting from 1) of the leftmost found pattern_i in the <code>string</code> and 0 otherwise.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT multiSearchFirstPosition(&#x27;123_abc_abc_CNCH?&#x27;,[&#x27;abc&#x27;,&#x27;CNCH&#x27;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─multiSearchFirstPosition(&#x27;123_abc_abc_CNCH?&#x27;, [&#x27;abc&#x27;, &#x27;CNCH&#x27;])─┐</span><br><span class="line">│ 5                                                              │</span><br><span class="line">└────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ngramDistance"><a href="#ngramDistance" class="headerlink" title="ngramDistance"></a>ngramDistance</h2><p>Calculates the 4-gram distance between <code>string</code> and <code>substring</code> : counts the symmetric difference between two multisets of 4-grams and normalizes it by the sum of their cardinalities. Returns float number from 0 to 1 – the closer to zero, the more strings are similar to each other. If the constant <code>substring</code> or <code>substring</code> is more than 32Kb, throws an exception. If some of the non-constant <code>substring</code> or <code>substring</code> strings are more than 32Kb, the distance is always one.</p>
<p>For case-insensitive search or&#x2F;and in UTF-8 format use functions <code>ngramDistanceCaseInsensitive, ngramDistanceUTF8, ngramDistanceCaseInsensitiveUTF8</code> .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ngramDistance(string, [substring_1, substring_2, …, substring_n]) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>substring</code> – The substring for matching.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns the index <code>i</code> (starting from 1) of the leftmost found substring_i in the <code>string</code> and 0 otherwise.</li>
</ul>
<p>Type: <code>Float32</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT ngramDistance(&#x27;abc123ascCNCH_83q&#x27;,&#x27;CNCH&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─ngramDistance(&#x27;abc123ascCNCH_83q&#x27;, &#x27;CNCH&#x27;)─┐</span><br><span class="line">│ 8.666667e-01                               │</span><br><span class="line">└────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="not"><a href="#not" class="headerlink" title="not"></a>not</h2><p>Calculates the result of the logical negation of the value. Corresponds to Logical Negation Operator .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">not(val);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>val</code> — The value. Int , UInt , Float or Nullable .</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li><code>1</code> , if the <code>val</code> is <code>0</code> .</li>
<li><code>0</code> , if the <code>val</code> is a non-zero value.</li>
<li><code>NULL</code> , if the <code>val</code> is a <code>NULL</code> value.</li>
</ul>
<p>Type: UInt8 or Nullable ( UInt8.</p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOT(1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─not(1)─┐</span><br><span class="line">│ 0      │</span><br><span class="line">└────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="notEmpty"><a href="#notEmpty" class="headerlink" title="notEmpty"></a>notEmpty</h2><p>Returns 0 for an empty <code>string</code> or 1 for a non-empty <code>string</code>.</p>
<p>The function also works for arrays.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notEmpty(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>s</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 1 for an empty string or 0 for a non-empty string.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT notEmpty(&#x27;test&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─notEmpty(&#x27;test&#x27;)─┐</span><br><span class="line">│ 1                │</span><br><span class="line">└──────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT notEmpty(&#x27;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─notEmpty(&#x27;&#x27;)─┐</span><br><span class="line">│ 0            │</span><br><span class="line">└──────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="notLike"><a href="#notLike" class="headerlink" title="notLike"></a>notLike</h2><p>notLike(string, pattern), string NOT LIKE pattern operator.</p>
<p>The same thing as ‘like’, but negative.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notLike(string, pattern)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Returns 0 if it does not match, or 1 if it matches.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT notLike(&#x27;test1&#x27;,&#x27;test2&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─notLike(&#x27;test1&#x27;, &#x27;test2&#x27;)─┐</span><br><span class="line">│ 1                         │</span><br><span class="line">└───────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>Searches for the <code>substring</code> in the <code>string</code>.</p>
<p>Returns the position of the found substring in the string, starting from 1.</p>
<p>Note: The search is case-sensitive by default, for a case-insensitive search, use the function positionCaseInsensitive .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">position(substring IN string)</span><br><span class="line"></span><br><span class="line">position(string, substring[, start_pos])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Alias: <code>locate(string, substring[, start_pos])</code> .</p>
<p>Note: Syntax of <code>position(substring IN string)</code> provides SQL-compatibility, the function works the same way as to <code>position(string, substring)</code> .</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Returns the position of the found substring in the string, starting from 1.</li>
</ul>
<p>Type: <code>Integer</code></p>
<p><strong>Examples</strong></p>
<p>The phrase “Hello, world!” contains a set of bytes representing a single-byte encoded text. The function returns some expected result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT position(&#x27;Hello, world!&#x27;, &#x27;!&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─position(&#x27;Hello, world!&#x27;, &#x27;!&#x27;)─┐</span><br><span class="line">│ 13                             │</span><br><span class="line">└────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TODO: need to verify it after resolved [Locate does not support start_pos] <a target="_blank" rel="noopener" href="https://jira-sg.bytedance.net/browse/BYT-3176">https://jira-sg.bytedance.net/browse/BYT-3176</a>, this task will be postpone till the final document on function part is ready</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT position(&#x27;Hello, world!&#x27;, &#x27;o&#x27;, 1),position(&#x27;Hello, world!&#x27;, &#x27;o&#x27;, 7);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌─position(&#x27;Hello, world!&#x27;, &#x27;o&#x27;, 1)─┬─position(&#x27;Hello, world!&#x27;, &#x27;o&#x27;, 7)─┐</span><br><span class="line"></span><br><span class="line">│                                 5 │                                 9 │</span><br><span class="line"></span><br><span class="line">└───────────────────────────────────┴───────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The same phrase in Russian contains characters which can’t be represented using a single byte. The function returns some unexpected result (use <a target="_blank" rel="noopener" href="https://bytedance.feishu.cn/docs/doccnUTIuxNrSuriPrZLQgGzmob#positionutf8">positionUTF8</a> function for multi-byte encoded text):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT position(&#x27;Привет, мир!&#x27;, &#x27;!&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─position(&#x27;Привет, мир!&#x27;, &#x27;!&#x27;)─┐</span><br><span class="line">│                            21 │</span><br><span class="line">└───────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Examples for position(substring IN string) syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 3 = position(&#x27;c&#x27; IN &#x27;abc&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─equals(3, position(&#x27;abc&#x27;, &#x27;c&#x27;))─┐</span><br><span class="line">│                               1 │</span><br><span class="line">└─────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 6 = position(&#x27;/&#x27; IN s) FROM (SELECT &#x27;Hello/World&#x27; AS s);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─equals(6, position(s, &#x27;/&#x27;))─┐</span><br><span class="line">│                           1 │</span><br><span class="line">└─────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="positionCaseInsensitive"><a href="#positionCaseInsensitive" class="headerlink" title="positionCaseInsensitive"></a>positionCaseInsensitive</h2><p>The same as position returns the position of the found substring in the string, starting from 1. Use the function for a case-insensitive search.</p>
<p>Works under the assumption that the string contains a set of bytes representing a single-byte encoded text. If this assumption is not met and a character can’t be represented using a single byte, the function does not throw an exception and returns some unexpected result. If character can be represented using two bytes, it will use two bytes and so on.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">positionCaseInsensitive(string, substring[, start_pos])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Starting position in bytes (counting from 1), if substring was found.</li>
<li>0, if the substring was not found.</li>
</ul>
<p>Type: <code>Integer</code> .</p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT positionCaseInsensitive(&#x27;Hello, world!&#x27;, &#x27;hello&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─positionCaseInsensitive(&#x27;Hello, world!&#x27;, &#x27;hello&#x27;)─┐</span><br><span class="line">│ 1                                                 │</span><br><span class="line">└───────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TODO: need to verify it after resolved [Locate does not support start_pos] <a target="_blank" rel="noopener" href="https://jira-sg.bytedance.net/browse/BYT-3176">https://jira-sg.bytedance.net/browse/BYT-3176</a>, this task will be postpone till the final document on function part is ready</p>
<h2 id="positionCaseInsensitiveUTF8"><a href="#positionCaseInsensitiveUTF8" class="headerlink" title="positionCaseInsensitiveUTF8"></a>positionCaseInsensitiveUTF8</h2><p>The same as positionUTF8 , but is case-insensitive. Returns the position (in Unicode points) of the found <code>substring</code> in the <code>string</code>, starting from 1.</p>
<p>Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text. If this assumption is not met, the function does not throw an exception and returns some unexpected result. If character can be represented using two Unicode points, it will use two and so on.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">positionCaseInsensitiveUTF8(string, substring[, start_pos])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Starting position in Unicode points (counting from 1), if substring was found.</li>
<li>0, if the substring was not found.</li>
</ul>
<p>Type: <code>Integer</code> .</p>
<p><strong>Example</strong></p>
<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT positionCaseInsensitiveUTF8(&#x27;Привет, мир!&#x27;, &#x27;Мир&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─positionCaseInsensitiveUTF8(&#x27;Привет, мир!&#x27;, &#x27;Мир&#x27;)─┐</span><br><span class="line">│ 9                                                  │</span><br><span class="line">└────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="positionUTF8"><a href="#positionUTF8" class="headerlink" title="positionUTF8"></a>positionUTF8</h2><p>Returns the position (in Unicode points) of the found <code>substring</code> in the <code>string</code>, starting from 1.</p>
<p>Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text. If this assumption is not met, the function does not throw an exception and returns some unexpected result. If character can be represented using two Unicode points, it will use two and so on.</p>
<p>For a case-insensitive search, use the function positionCaseInsensitiveUTF8 .</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">positionUTF8(string, substring[, start_pos])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Starting position in Unicode points (counting from 1), if substring was found.</li>
<li>0, if the substring was not found.</li>
</ul>
<p>Type: <code>Integer</code> .</p>
<p><strong>Examples</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT positionUTF8(&#x27;Привет, мир!&#x27;, &#x27;!&#x27;) as example;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The phrase “Hello, world!” in Russian contains a set of Unicode points representing a single-point encoded text. The function returns some expected result:</p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─example─┐</span><br><span class="line">│ 12      │</span><br><span class="line">└─────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TODO: Xinghe: below sentences will be deleted due to two query returns the same result.</p>
<p>The phrase “Salut, étudiante!”, where character <code>é</code> can be represented using a one point ( <code>U+00E9</code> ) or two points ( <code>U+0065U+0301</code> ) the function can be returned some unexpected result:</p>
<p>Query for the letter <code>é</code> , which is represented one Unicode point <code>U+00E9</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT positionUTF8(&#x27;Salut, étudiante!&#x27;, &#x27;!&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─positionUTF8(&#x27;Salut, étudiante!&#x27;, &#x27;!&#x27;)─┐</span><br><span class="line">│                                     17 │</span><br><span class="line">└────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Query for the letter <code>é</code> , which is represented two Unicode points <code>U+0065U+0301</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT positionUTF8(&#x27;Salut, étudiante!&#x27;, &#x27;!&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─positionUTF8(&#x27;Salut, étudiante!&#x27;, &#x27;!&#x27;)─┐</span><br><span class="line">│                                     18 │</span><br><span class="line">└────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="regexpQuoteMeta"><a href="#regexpQuoteMeta" class="headerlink" title="regexpQuoteMeta"></a>regexpQuoteMeta</h2><p>The function adds a backslash before some predefined characters in the <code>string</code>.</p>
<p>Predefined characters: <code>\0</code> , <code>|</code> , <code>(</code> , <code>)</code> , <code>^</code> , <code>$</code> , <code>.</code> , <code>[</code> , <code>]</code> , <code>?</code> , <code>*</code> , <code>+</code> , <code>&#123;</code> , <code>:</code> , <code>-</code> .</p>
<p>TODO: Note: i have deleted <code>\\</code> in predefined characters because it’s not working.</p>
<p>This implementation slightly differs from re2::RE2::QuoteMeta. It escapes zero byte as <code>\0</code> instead of <code>\x00</code> and it escapes only required characters.</p>
<p>For more information, see the link: <a target="_blank" rel="noopener" href="https://github.com/google/re2/blob/master/re2/re2.cc#L473">RE2</a></p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">regexpQuoteMeta(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<p>– The string.</p>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT regexpQuoteMeta(&#x27; | , ( , ) , ^ , $ , . , [ , ] , ? ,&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─regexpQuoteMeta(&#x27; | , ( , ) , ^ , $ , . , [ , ] , ? ,&#x27;)─┐</span><br><span class="line">│  \| , \( , \) , \^ , \$ , \. , \[ , \] , \? ,           │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><p>Replaces all occurrences of the <code>substring</code> in <code>string</code> with the <code>replacement</code>.</p>
<p>Alias to replaceAll</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">replace(string, substring, replacement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — The String, in which substring will to be searched.</li>
<li><code>substring</code> — The Substring to be searched.</li>
<li><code>replacement</code> — The replacement string to replace matched substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Replaces all occurrences of the <code>substring</code> in <code>string</code> with the <code>replacement</code>.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replace(&#x27;test target_string test&#x27;,&#x27;target_string&#x27;,&#x27;CNCH&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replace(&#x27;test target_string test&#x27;, &#x27;target_string&#x27;, &#x27;CNCH&#x27;)─┐</span><br><span class="line">│ test CNCH test                                              │</span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="replaceAll"><a href="#replaceAll" class="headerlink" title="replaceAll"></a>replaceAll</h2><p>Replaces all occurrences of the <code>substring</code> in <code>string</code> with the <code>replacement</code>.</p>
<p>Please refer to replace</p>
<h2 id="replaceOne"><a href="#replaceOne" class="headerlink" title="replaceOne"></a>replaceOne</h2><p>Replaces the first occurrence, if it exists, of the <code>substring</code> in <code>string</code> with the <code>replacement</code>.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">replaceOne(string, substring, replacement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The String, in which substring will to be searched.String .</li>
<li><code>substring</code> – The Substring to be searched.String</li>
<li><code>start_pos</code> – The Optional parameter, position of the first character in the string to start search.UInt</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Replaces first occurrences of the substring in string with the replacement.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replaceOne(&#x27;test target_string test target_string&#x27;,&#x27;target_string&#x27;,&#x27;CNCH&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replaceOne(&#x27;test target_string test target_string&#x27;, &#x27;target_string&#x27;, &#x27;CNCH&#x27;)─┐</span><br><span class="line">│ test CNCH test target_string                                                 │</span><br><span class="line">└──────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="replaceRegexpAll"><a href="#replaceRegexpAll" class="headerlink" title="replaceRegexpAll"></a>replaceRegexpAll</h2><p>This does the same thing like replaceAll, but using regular expression.</p>
<ul>
<li>A pattern can be specified as ‘replacement’. This pattern can include substitutions <code>\0-\9</code> .</li>
<li>The substitution <code>\0</code> includes the entire regular expression. Substitutions <code>\1-\9</code> correspond to the subpattern numbers.To use the <code>\</code> character in a template, escape it using <code>\</code> .</li>
</ul>
<p>Noted: Replacement using the re2 regular expression.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">replaceRegexpAll(string, pattern, replacement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching.</li>
<li><code>replacement</code> — The replacement string to replace matched substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Replaces all occurrences of the substring in string with the replacement.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replaceRegexpAll(&#x27;Hello, World!&#x27;, &#x27;.&#x27;, &#x27;\\0\\0&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replaceRegexpAll(&#x27;Hello, World!&#x27;, &#x27;.&#x27;, &#x27;\\0\\0&#x27;)─┐</span><br><span class="line">│ HHeelllloo,,  WWoorrlldd!!                       │</span><br><span class="line">└──────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>As an exception, if a regular expression worked on an empty substring, the replacement is not made more than once.</p>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replaceRegexpAll(&#x27;Hello, World!&#x27;, &#x27;^&#x27;, &#x27;here: &#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replaceRegexpAll(&#x27;Hello, World!&#x27;, &#x27;^&#x27;, &#x27;here: &#x27;)─┐</span><br><span class="line">│ here: Hello, World!                              │</span><br><span class="line">└──────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="replaceRegexpOne"><a href="#replaceRegexpOne" class="headerlink" title="replaceRegexpOne"></a>replaceRegexpOne</h2><p>Replaces only the first occurrence, if it exists.</p>
<p>Noted: Replacement using the pattern regular expression. A re2 regular expression.</p>
<p>A pattern can be specified as ‘replacement’. This pattern can include substitutions <code>\0-\9</code> .</p>
<p>The substitution <code>\0</code> includes the entire regular expression. Substitutions <code>\1-\9</code> correspond to the subpattern numbers.To use the <code>\</code> character in a template, escape it using <code>\</code> .</p>
<p>Also keep in mind that a string literal requires an extra escape.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">replaceRegexpOne(string, pattern, replacement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>pattern</code> – The pattern for matching.</li>
<li><code>replacement</code> — The replacement string to replace matched substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>Replaces first occurrences of the substring in string with the replacement.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replaceRegexpOne(&#x27;test &lt;target_string&gt; test &lt;target_string&gt;&#x27;,&#x27;&lt;.*?&gt;&#x27;,&#x27;CNCH&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replaceRegexpOne(&#x27;test &lt;target_string&gt; test &lt;target_string&gt;&#x27;, &#x27;&lt;.*?&gt;&#x27;, &#x27;CNCH&#x27;)─┐</span><br><span class="line">│ test CNCH test &lt;target_string&gt;                                                 │</span><br><span class="line">└────────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>other example</strong></p>
<p>Example 1. Converting the date to American format:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select &#x27;2014-03-17&#x27;, replaceRegexpOne(toString(&#x27;2014-03-17&#x27;), &#x27;(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)&#x27;, &#x27;\\2/\\3/\\1&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─&#x27;2014-03-17&#x27;─┬─replaceRegexpOne(toString(&#x27;2014-03-17&#x27;), &#x27;(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)&#x27;, &#x27;\\2/\\3/\\1&#x27;)─┐</span><br><span class="line">│ 2014-03-17   │ 03/17/2014                                                                            │</span><br><span class="line">└──────────────┴───────────────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Example 2. Copying a string ten times:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT replaceRegexpOne(&#x27;Hello, World!&#x27;, &#x27;.*&#x27;, &#x27;\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─replaceRegexpOne(&#x27;Hello, World!&#x27;, &#x27;.*&#x27;, &#x27;\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&#x27;)──────────────────────────────────────────────────────────┐</span><br><span class="line">│ Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World! │</span><br><span class="line">└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h2><p>Reverses the string (as a sequence of bytes).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reverse(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The reversed string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT reverse(&#x27;abcd1234&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─reverse(&#x27;abcd1234&#x27;)─┐</span><br><span class="line">│ 4321dcba            │</span><br><span class="line">└─────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="reverseUTF8"><a href="#reverseUTF8" class="headerlink" title="reverseUTF8"></a>reverseUTF8</h2><p>Reverses a sequence of Unicode code points, assuming that the string contains a set of bytes representing a UTF-8 text. Otherwise, it does something else (it does not throw an exception).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reverseUTF8(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The UTF8 string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The reversed string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT reverseUTF8(&#x27;\x61\x62\x63\x64\x31\x32\x33\x34&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Note: ‘\x61\x62\x63\x64\x31\x32\x33\x34’ is ‘abcd1234’ in UTF8 format.</p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─reverseUTF8(&#x27;abcd1234&#x27;)─┐</span><br><span class="line">│ 4321dcba                │</span><br><span class="line">└─────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="size"><a href="#size" class="headerlink" title="size"></a>size</h2><p>Returns the length of a string in bytes (not in characters, and not in code points).</p>
<p>Noted: The function also works for arrays.</p>
<p>Alias to length</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">size(x)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>x</code> – The string or array.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The length of a string or array.</li>
</ul>
<p>Type: <code>UInt64</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT size(&#x27;Hello&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─size(&#x27;Hello&#x27;)─┐</span><br><span class="line">│ 5             │</span><br><span class="line">└───────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Other example</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT size([1,2,3,4]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─size([1, 2, 3, 4])─┐</span><br><span class="line">│ 4                  │</span><br><span class="line">└────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="splitByChar"><a href="#splitByChar" class="headerlink" title="splitByChar"></a>splitByChar</h2><p>Splits a string into substrings separated by a specified character. It uses a constant string <code>separator</code> which consisting of exactly one character.</p>
<p>Returns an array of selected substrings. Empty substrings may be selected if the separator occurs at the beginning or end of the string, or if there are multiple consecutive separators.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">splitByChar(separator, string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>separator</code> — The separator which should contain exactly one character. String .</li>
<li><code>string</code> — The string to split. String .</li>
</ul>
<p><strong>Returned value</strong></p>
<p>Returns an array of selected substrings. Empty substrings may be selected when:</p>
<ul>
<li>A separator occurs at the beginning or end of the string;</li>
<li>There are multiple consecutive separators;</li>
<li>The original string <code>string</code> is empty.</li>
</ul>
<p>Type: <code>array</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT splitByChar(&#x27;,&#x27;, &#x27;1,2,3,abcde&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─splitByChar(&#x27;,&#x27;, &#x27;1,2,3,abcde&#x27;)─┐</span><br><span class="line">│ [1, 2, 3, abcde]                │</span><br><span class="line">└─────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="splitByString"><a href="#splitByString" class="headerlink" title="splitByString"></a>splitByString</h2><p>Splits a string into substrings separated by a string. It uses a constant string <code>separator</code> of multiple characters as the separator. If the string <code>separator</code> is empty, it will split the <code>string</code> into an array of single characters.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">splitByString(separator, string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>separator</code> — The separator which should contain a string. String .</li>
<li><code>string</code> — The string to split. String .</li>
</ul>
<p><strong>Returned value</strong></p>
<p>Returns an array of selected substrings. Empty substrings may be selected when:</p>
<ul>
<li>A separator occurs at the beginning or end of the string;</li>
<li>There are multiple consecutive separators;</li>
<li>The original string <code>string</code> is empty.</li>
</ul>
<p>Type: <code>array</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT splitByString(&#x27;test&#x27;, &#x27;abctestCNCHtestdef&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─splitByString(&#x27;test&#x27;, &#x27;abctestCNCHtestdef&#x27;)─┐</span><br><span class="line">│ [abc, CNCH, def]                            │</span><br><span class="line">└─────────────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="startsWith"><a href="#startsWith" class="headerlink" title="startsWith"></a>startsWith</h2><p>Returns 1 whether <code>string</code> starts with the specified <code>prefix</code>, otherwise it returns 0.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">startsWith(string, prefix)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — The string .</li>
<li><code>prefix</code> — The prefix for matching.</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>1, if the string starts with the specified prefix.</li>
<li>0, if the string does not start with the specified prefix.</li>
</ul>
<p>Type: <code>UInt8</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT startsWith(&#x27;Hello, world!&#x27;, &#x27;He&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─startsWith(&#x27;Hello, world!&#x27;, &#x27;He&#x27;)─┐</span><br><span class="line">│ 1                                 │</span><br><span class="line">└───────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h2><p>Please refer to substring## substring<br>Returns a substring starting with the byte from the <code>offset</code> index that is <code>length</code> bytes long. Character indexing starts from one (as in standard SQL).</p>
<p>Note: The <code>offset</code> and <code>length</code> arguments must be constants.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">substring(string, offset, length)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>offset</code> – The substring starting offset.</li>
<li><code>length</code> – The length of substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The substring.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT substring(&#x27;Hello CNCH&#x27;, 7, 4);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─substr(&#x27;Hello CNCH&#x27;, 7, 4)─┐</span><br><span class="line">│ CNCH                       │</span><br><span class="line">└────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="substringUTF8"><a href="#substringUTF8" class="headerlink" title="substringUTF8"></a>substringUTF8</h2><p>The same as substring, but for Unicode code points. Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text.</p>
<p>Note: If this assumption is not met, it returns some result (it does not throw an exception).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">substringUTF8(string, offset, length)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
<li><code>offset</code> – The substring starting offset.</li>
<li><code>length</code> – The length of substring.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The substring.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT substringUTF8(&#x27;\x48\x65\x6c\x6c\x6f\x20\x43\x4e\x43\x48H&#x27;, 7, 4);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─substringUTF8(&#x27;Hello CNCHH&#x27;, 7, 4)─┐</span><br><span class="line">│ CNCH                               │</span><br><span class="line">└────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="trimBoth"><a href="#trimBoth" class="headerlink" title="trimBoth"></a>trimBoth</h2><p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from both ends of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trimBoth(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Alias: <code>trim(string)</code> .</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — string to trim. String .</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>A string without leading and trailing common whitespaces.</li>
</ul>
<p>Type: <code>String</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT trimBoth(&#x27;     Hello, world!     &#x27;) as a;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─a─────────────┐</span><br><span class="line">│ Hello, world! │</span><br><span class="line">└───────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="trimLeft"><a href="#trimLeft" class="headerlink" title="trimLeft"></a>trimLeft</h2><p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from the beginning of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trimLeft(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Alias: <code>trim(string)</code> .</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — string to trim. String .</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>A string without leading common whitespaces.</li>
</ul>
<p>Type: <code>String</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT trimLeft(&#x27;     Hello, world!     &#x27;) as example;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─example────────────┐</span><br><span class="line">│ Hello, world!      │</span><br><span class="line">└────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="trimRight"><a href="#trimRight" class="headerlink" title="trimRight"></a>trimRight</h2><p>Removes all consecutive occurrences of common whitespace (ASCII character 32) from the end of a string. It does not remove other kinds of whitespace characters (tab, no-break space, etc.).</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trimRight(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Alias: <code>trim(string)</code> .</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> — string to trim. String .</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>A string without trailing common whitespaces.</li>
</ul>
<p>Type: <code>String</code></p>
<p><strong>Example</strong></p>
<p>TODO： below query will trims characters…. i have feedbacked to byteyard on call</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT trimRight(&#x27;     Hello, world!     &#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─trimLeft(&#x27;     Hello, world!     &#x27;)─┐</span><br><span class="line">│ Hello, world!                       │</span><br><span class="line">└─────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="tryBase64Decode"><a href="#tryBase64Decode" class="headerlink" title="tryBase64Decode"></a>tryBase64Decode</h2><p>Similar to base64Decode, but in case of error an empty string would be returned.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tryBase64Decode(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The base64 encoded string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The decoded string.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT tryBase64Decode(&#x27;SGVsbG8gV29ybGQh&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Note: ‘SGVsbG8gV29ybGQh’ is the encoded base64 format of ‘Hello World! ‘</p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─tryBase64Decode(&#x27;SGVsbG8gV29ybGQh&#x27;)─┐</span><br><span class="line">│ Hello World!                        │</span><br><span class="line">└─────────────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ucase"><a href="#ucase" class="headerlink" title="ucase"></a>ucase</h2><p>Converts ASCII Latin symbols in a string to uppercase.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ucase(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in uppercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT ucase(&#x27;ABCdef&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─ucase(&#x27;ABCdef&#x27;)─┐</span><br><span class="line">│ ABCDEF          │</span><br><span class="line">└─────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="upper"><a href="#upper" class="headerlink" title="upper"></a>upper</h2><p>Converts ASCII Latin symbols in a string to uppercase.</p>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">upper(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in uppercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT upper(&#x27;ABCdef&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─upper(&#x27;ABCdef&#x27;)─┐</span><br><span class="line">│ ABCDEF          │</span><br><span class="line">└─────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="upperUTF8"><a href="#upperUTF8" class="headerlink" title="upperUTF8"></a>upperUTF8</h2><p>Converts a string to uppercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.</p>
<ul>
<li>It does not detect the language. So for Turkish the result might not be exactly correct.</li>
<li>If the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.</li>
<li>If the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</li>
</ul>
<p><strong>Syntax</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">upperUTF8(string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Arguments</strong></p>
<ul>
<li><code>string</code> – The UTF8 string.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>The string in uppercase letter.</li>
</ul>
<p>Type: <code>string</code></p>
<p><strong>Example</strong></p>
<p>encode ‘hello world ！’ to UTF8 ‘\x68\x65\x6c\x6c\x6f\x20\x77\x6f\x72\x6c\x64\x20\xef\xbc\x81’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT upperUTF8(&#x27;\x68\x65\x6c\x6c\x6f\x20\x77\x6f\x72\x6c\x64\x20\xef\xbc\x81&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌─upperUTF8(&#x27;hello world ！&#x27;)─┐</span><br><span class="line">│ HELLO WORLD ！                │</span><br><span class="line">└──────────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

                
            </div>
            <hr/>

            



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Docs/">
                                    <span class="chip bg-color">Docs</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    


</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022-2023</span>
            
            <!-- <span id="year">2022</span> -->
            <a href="/about" target="_blank">ByteDance Inc.</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/byconity" class="tooltipped" target="_blank" data-tooltip="GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>















    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
